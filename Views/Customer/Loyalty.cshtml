@{
    ViewData["Title"] = "Loyalty Points";
    Layout = "_DashboardLayout";
}

<!-- Customer Loyalty Points Container -->
<div class="min-h-screen bg-dark-navy text-white pt-20">
    <!-- Main Content -->
    <div class="p-4 md:p-6 pt-8">
        <!-- Page Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold bg-gradient-to-r from-purple-400 to-teal-400 text-transparent bg-clip-text mb-2">Loyalty Points</h1>
            <p class="text-gray-400">Earn points with every booking and redeem them for rewards</p>
        </div>

        <!-- Loyalty Points Overview -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
            <!-- Current Points Card -->
            <div class="lg:col-span-2">
                <div class="bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-8">
                    <div class="text-center">
                        <div class="w-24 h-24 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-6">
                            <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                            </svg>
                        </div>
                        <h2 class="text-4xl font-bold text-white mb-2">@(ViewBag.LoyaltyPoints?.Points ?? 0)</h2>
                        <p class="text-gray-400 text-lg mb-6">Loyalty Points</p>
                        <div class="bg-white/5 border border-white/10 rounded-lg p-4">
                            <p class="text-sm text-gray-300">@(ViewBag.LoyaltyPoints?.Description ?? "Start earning points with your first booking!")</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stats Card -->
            <div class="space-y-6">
                <div class="bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6">
                    <h3 class="text-lg font-bold mb-4">Your Stats</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between">
                            <span class="text-gray-400">Total Bookings</span>
                            <span class="text-white font-semibold">@ViewBag.TotalBookings</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Total Spent</span>
                            <span class="text-white font-semibold">LKR @ViewBag.TotalSpent.ToString("F2")</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Points Earned</span>
                            <span class="text-white font-semibold">@(ViewBag.LoyaltyPoints?.Points ?? 0)</span>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-purple-500/20 to-teal-500/20 border border-purple-500/30 rounded-2xl p-6">
                    <h3 class="text-lg font-bold mb-4">Next Reward</h3>
                    <div class="text-center">
                        <p class="text-2xl font-bold text-white mb-2">500 Points</p>
                        <p class="text-gray-300 text-sm mb-4">Get 10% off your next booking</p>
                        <div class="w-full bg-white/20 rounded-full h-2">
                            <div class="bg-gradient-to-r from-purple-500 to-teal-500 h-2 rounded-full" style="width: @(Math.Min((ViewBag.LoyaltyPoints?.Points ?? 0) * 100 / 500, 100))%"></div>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">@(500 - (ViewBag.LoyaltyPoints?.Points ?? 0)) points to go</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- How It Works -->
        <div class="bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold mb-6">How It Works</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="text-center">
                    <div class="w-16 h-16 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl font-bold text-blue-400">1</span>
                    </div>
                    <h3 class="text-lg font-semibold text-white mb-2">Book Events</h3>
                    <p class="text-gray-400 text-sm">Make bookings and earn points automatically</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl font-bold text-green-400">2</span>
                    </div>
                    <h3 class="text-lg font-semibold text-white mb-2">Earn Points</h3>
                    <p class="text-gray-400 text-sm">Get 1 point for every LKR 10 spent on bookings</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl font-bold text-purple-400">3</span>
                    </div>
                    <h3 class="text-lg font-semibold text-white mb-2">Redeem Rewards</h3>
                    <p class="text-gray-400 text-sm">Use points for discounts and special offers</p>
                </div>
            </div>
        </div>

        <!-- Rewards Tiers -->
        <div class="bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold mb-6">Rewards Tiers</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-white/5 border border-white/10 rounded-lg p-6 text-center @((ViewBag.LoyaltyPoints?.Points ?? 0) >= 100 ? "ring-2 ring-green-500" : "")">
                    <div class="w-12 h-12 bg-gray-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-white mb-2">Bronze</h3>
                    <p class="text-gray-400 text-sm mb-4">100+ Points</p>
                    <ul class="text-xs text-gray-300 space-y-1">
                        <li>• 5% off bookings</li>
                        <li>• Priority support</li>
                    </ul>
                </div>

                <div class="bg-white/5 border border-white/10 rounded-lg p-6 text-center @((ViewBag.LoyaltyPoints?.Points ?? 0) >= 500 ? "ring-2 ring-green-500" : "")">
                    <div class="w-12 h-12 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-white mb-2">Silver</h3>
                    <p class="text-gray-400 text-sm mb-4">500+ Points</p>
                    <ul class="text-xs text-gray-300 space-y-1">
                        <li>• 10% off bookings</li>
                        <li>• Early access to events</li>
                        <li>• Free ticket upgrades</li>
                    </ul>
                </div>

                <div class="bg-white/5 border border-white/10 rounded-lg p-6 text-center @((ViewBag.LoyaltyPoints?.Points ?? 0) >= 1000 ? "ring-2 ring-green-500" : "")">
                    <div class="w-12 h-12 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-white mb-2">Gold</h3>
                    <p class="text-gray-400 text-sm mb-4">1000+ Points</p>
                    <ul class="text-xs text-gray-300 space-y-1">
                        <li>• 15% off bookings</li>
                        <li>• VIP event access</li>
                        <li>• Personal concierge</li>
                    </ul>
                </div>

                <div class="bg-white/5 border border-white/10 rounded-lg p-6 text-center @((ViewBag.LoyaltyPoints?.Points ?? 0) >= 2000 ? "ring-2 ring-green-500" : "")">
                    <div class="w-12 h-12 bg-pink-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-pink-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-white mb-2">Platinum</h3>
                    <p class="text-gray-400 text-sm mb-4">2000+ Points</p>
                    <ul class="text-xs text-gray-300 space-y-1">
                        <li>• 20% off bookings</li>
                        <li>• Exclusive events</li>
                        <li>• Free premium tickets</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-8">
            <h2 class="text-2xl font-bold mb-6">Recent Activity</h2>
            @if (ViewBag.LoyaltyPoints != null)
            {
                <div class="space-y-4">
                    <div class="bg-white/5 border border-white/10 rounded-lg p-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-green-500/20 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h4 class="text-white font-medium">Points Earned</h4>
                                    <p class="text-gray-400 text-sm">@ViewBag.LoyaltyPoints.Description</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <span class="text-green-400 font-semibold">+@ViewBag.LoyaltyPoints.Points points</span>
                                <p class="text-gray-400 text-xs">@ViewBag.LoyaltyPoints.LastUpdated.ToString("MMM dd, yyyy")</p>
                            </div>
                        </div>
                    </div>
                </div>
            }
            else
            {
                <div class="text-center py-8">
                    <svg class="w-16 h-16 text-gray-600 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                    </svg>
                    <h3 class="text-lg font-semibold text-white mb-2">No activity yet</h3>
                    <p class="text-gray-400 mb-4">Start booking events to earn loyalty points</p>
                    <a asp-controller="Customer" asp-action="Events" class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-500 to-teal-500 text-white rounded-lg font-semibold hover:from-purple-600 hover:to-teal-600 transition-all">
                        Browse Events
                    </a>
                </div>
            }
        </div>
    </div>
</div>
